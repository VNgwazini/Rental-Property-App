{"ast":null,"code":"var _jsxFileName = \"/Users/vusa/Portfolio/Rental-Property-App/components/AutoComplete.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// *https://www.registers.service.gov.uk/registers/country/use-the-api*\nimport { useState, useEffect, useContext } from \"react\";\nimport fetch from \"cross-fetch\";\nimport React from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nexport default function MAutocomplete(props) {\n  const [open, setOpen] = React.useState(false);\n  const [options, setOptions] = React.useState([]);\n  const loading = open && options.length === 0;\n  const {\n    0: selectedLocation,\n    1: setSelectedLocation\n  } = useState(\"\");\n  const {\n    0: selectedObject,\n    1: setSelectedObject\n  } = useState({});\n  var url = `http://localhost:1337/property-overviews?street_address_contains=${selectedLocation}&_limit=10`;\n  React.useEffect(() => {\n    let active = true;\n\n    if (!loading) {\n      return undefined;\n    }\n\n    (async () => {\n      const response = await fetch(url);\n      const properties = await response.json();\n      const arr = properties.map(p => p);\n\n      if (active) {\n        setOptions(arr);\n      }\n    })();\n\n    return () => {\n      active = false;\n    };\n  }, [selectedLocation, loading]);\n  React.useEffect(() => {\n    if (!open) {\n      setOptions([]);\n    }\n  }, [open]);\n\n  function handleChange(event, value) {\n    const convertedLocation = value.toString();\n    setSelectedLocation(convertedLocation);\n    const obj = options.filter(o => {\n      return o.street_address === convertedLocation;\n    })[0];\n    setSelectedObject(obj);\n    parent(obj);\n  }\n\n  function parent(obj) {\n    props.setSelectedObject(obj);\n  }\n\n  return __jsx(Autocomplete, {\n    onInputChange: handleChange,\n    id: \"asynchronous-demo\",\n    style: {\n      width: \"100%\"\n    },\n    open: open,\n    onOpen: () => {\n      setOpen(true);\n    },\n    onClose: () => {\n      setOpen(false);\n    },\n    getOptionSelected: (option, value) => option.street_address === value.street_address,\n    getOptionLabel: option => option.street_address,\n    options: options,\n    loading: loading,\n    renderInput: params => __jsx(TextField, _extends({}, params, {\n      label: \"Enter Address\",\n      variant: \"outlined\",\n      InputProps: _objectSpread(_objectSpread({}, params.InputProps), {}, {\n        endAdornment: __jsx(React.Fragment, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }\n        }, loading ? __jsx(CircularProgress, {\n          color: \"inherit\",\n          size: 20,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 19\n          }\n        }) : null, params.InputProps.endAdornment)\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  });\n}","map":{"version":3,"sources":["/Users/vusa/Portfolio/Rental-Property-App/components/AutoComplete.js"],"names":["useState","useEffect","useContext","fetch","React","TextField","Autocomplete","CircularProgress","MAutocomplete","props","open","setOpen","options","setOptions","loading","length","selectedLocation","setSelectedLocation","selectedObject","setSelectedObject","url","active","undefined","response","properties","json","arr","map","p","handleChange","event","value","convertedLocation","toString","obj","filter","o","street_address","parent","width","option","params","InputProps","endAdornment"],"mappings":"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","sourcesContent":["// *https://www.registers.service.gov.uk/registers/country/use-the-api*\nimport { useState, useEffect, useContext } from \"react\";\nimport fetch from \"cross-fetch\";\nimport React from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nexport default function MAutocomplete(props) {\n  const [open, setOpen] = React.useState(false);\n  const [options, setOptions] = React.useState([]);\n  const loading = open && options.length === 0;\n  const [selectedLocation, setSelectedLocation] = useState(\"\");\n  const [selectedObject, setSelectedObject] = useState({});\n\n  var url = `http://localhost:1337/property-overviews?street_address_contains=${selectedLocation}&_limit=10`;\n\n  React.useEffect(() => {\n    let active = true;\n\n    if (!loading) {\n      return undefined;\n    }\n\n    (async () => {\n      const response = await fetch(url);\n      const properties = await response.json();\n\n      const arr = properties.map((p) => p);\n      if (active) {\n        setOptions(arr);\n      }\n    })();\n\n    return () => {\n      active = false;\n    };\n  }, [selectedLocation, loading]);\n\n  React.useEffect(() => {\n    if (!open) {\n      setOptions([]);\n    }\n  }, [open]);\n\n  function handleChange(event, value) {\n    const convertedLocation = value.toString();\n    setSelectedLocation(convertedLocation);\n    const obj = options.filter((o) => {\n      return o.street_address === convertedLocation;\n    })[0];\n    setSelectedObject(obj);\n    parent(obj);\n  }\n\n  function parent(obj) {\n    props.setSelectedObject(obj);\n  }\n\n  return (\n    <Autocomplete\n      onInputChange={handleChange}\n      id=\"asynchronous-demo\"\n      style={{ width: \"100%\" }}\n      open={open}\n      onOpen={() => {\n        setOpen(true);\n      }}\n      onClose={() => {\n        setOpen(false);\n      }}\n      getOptionSelected={(option, value) =>\n        option.street_address === value.street_address\n      }\n      getOptionLabel={(option) => option.street_address}\n      options={options}\n      loading={loading}\n      renderInput={(params) => (\n        <TextField\n          {...params}\n          label=\"Enter Address\"\n          variant=\"outlined\"\n          InputProps={{\n            ...params.InputProps,\n            endAdornment: (\n              <React.Fragment>\n                {loading ? (\n                  <CircularProgress color=\"inherit\" size={20} />\n                ) : null}\n                {params.InputProps.endAdornment}\n              </React.Fragment>\n            ),\n          }}\n        />\n      )}\n    />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}